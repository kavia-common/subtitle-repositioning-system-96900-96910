{"is_source_file": true, "format": "Python", "description": "This source file implements a REST API backend for a subtitle repositioning service using FastAPI. It provides endpoints for health checks, uploading videos and subtitles to receive repositioned subtitle cues in JSON or downloadable SRT format, and utility functions for parsing and serializing SRT files.", "external_files": ["src/core/reposition"], "external_methods": ["reposition_subtitles_for_video"], "published": ["health_check", "reposition_subtitles_json", "reposition_subtitles_download", "docs_usage"], "classes": [{"name": "Cue", "description": "Model representing a subtitle cue with start/end times and text."}, {"name": "RepositionedCue", "description": "Extends Cue with an additional field for positional suggestion."}, {"name": "RepositionResponse", "description": "Response model containing list of repositioned cues, format, and optional note."}], "methods": [{"name": "List[Tuple[float,float,str]] _parse_srt_to_cues(srt_bytes: bytes)", "description": "Parses SRT file bytes into a list of (start, end, text) tuples.", "scope": "", "scopeKind": ""}, {"name": "str _seconds_to_srt_timestamp(seconds: float)", "description": "Converts seconds to SRT timestamp string.", "scope": "", "scopeKind": ""}, {"name": "float _hhmmss_to_seconds(ts: str)", "description": "Converts SRT timestamp string to seconds as float.", "scope": "", "scopeKind": ""}, {"name": "str _serialize_cues_to_srt(cues: List[Tuple[float, float, str]])", "description": "Serializes list of cues into SRT formatted string.", "scope": "", "scopeKind": ""}, {"name": "health_check()", "description": "Provides a health check endpoint to verify service is running.", "scope": "", "scopeKind": ""}, {"name": "reposition_subtitles_json( video: UploadFile = File(..., description=\"Video file\"), subtitles_file: UploadFile = File(..., description=\"SRT subtitle file\"), )", "description": "Endpoint to upload video and subtitles, returning repositioned cues in JSON.", "scope": "", "scopeKind": ""}, {"name": "reposition_subtitles_download( video: UploadFile = File(..., description=\"Video file\"), subtitles_file: UploadFile = File(..., description=\"SRT subtitle file\"), include_position_hint: bool = Form(True, description=\"If true, annotate text with '[pos: ...]'\"), )", "description": "Endpoint to upload video and subtitles, returning a downloadable repositioned SRT file.", "scope": "", "scopeKind": ""}, {"name": "docs_usage()", "description": "Provides usage documentation for the API.", "scope": "", "scopeKind": ""}, {"name": "flush()", "scope": "_parse_srt_to_cues", "scopeKind": "function", "description": "unavailable"}], "calls": ["reposition_subtitles_for_video"], "search-terms": ["FastAPI", "subtitle repositioning", "upload video", "reposition subtitles", "SRT parsing", "JSON response", "download SRT"], "state": 2, "file_id": 2, "knowledge_revision": 13, "git_revision": "0472201e075ad3b6b2e61e9759c6a5349cbfa3b3", "revision_history": [{"9": "0472201e075ad3b6b2e61e9759c6a5349cbfa3b3"}, {"12": "0472201e075ad3b6b2e61e9759c6a5349cbfa3b3"}, {"13": "0472201e075ad3b6b2e61e9759c6a5349cbfa3b3"}], "ctags": [{"_type": "tag", "name": "Cue", "path": "/home/kavia/workspace/code-generation/subtitle-repositioning-system-96900-96910/subtitle_backend/src/api/main.py", "pattern": "/^class Cue(BaseModel):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "RepositionResponse", "path": "/home/kavia/workspace/code-generation/subtitle-repositioning-system-96900-96910/subtitle_backend/src/api/main.py", "pattern": "/^class RepositionResponse(BaseModel):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "RepositionedCue", "path": "/home/kavia/workspace/code-generation/subtitle-repositioning-system-96900-96910/subtitle_backend/src/api/main.py", "pattern": "/^class RepositionedCue(Cue):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "_hhmmss_to_seconds", "path": "/home/kavia/workspace/code-generation/subtitle-repositioning-system-96900-96910/subtitle_backend/src/api/main.py", "pattern": "/^def _hhmmss_to_seconds(ts: str) -> float:$/", "language": "Python", "typeref": "typename:float", "kind": "function", "signature": "(ts: str)"}, {"_type": "tag", "name": "_parse_srt_to_cues", "path": "/home/kavia/workspace/code-generation/subtitle-repositioning-system-96900-96910/subtitle_backend/src/api/main.py", "pattern": "/^def _parse_srt_to_cues(srt_bytes: bytes) -> List[Tuple[float, float, str]]:$/", "language": "Python", "typeref": "typename:List[Tuple[float,float,str]]", "kind": "function", "signature": "(srt_bytes: bytes)"}, {"_type": "tag", "name": "_seconds_to_srt_timestamp", "path": "/home/kavia/workspace/code-generation/subtitle-repositioning-system-96900-96910/subtitle_backend/src/api/main.py", "pattern": "/^def _seconds_to_srt_timestamp(seconds: float) -> str:$/", "language": "Python", "typeref": "typename:str", "kind": "function", "signature": "(seconds: float)"}, {"_type": "tag", "name": "_serialize_cues_to_srt", "path": "/home/kavia/workspace/code-generation/subtitle-repositioning-system-96900-96910/subtitle_backend/src/api/main.py", "pattern": "/^def _serialize_cues_to_srt(cues: List[Tuple[float, float, str]]) -> str:$/", "language": "Python", "typeref": "typename:str", "kind": "function", "signature": "(cues: List[Tuple[float, float, str]])"}, {"_type": "tag", "name": "app", "path": "/home/kavia/workspace/code-generation/subtitle-repositioning-system-96900-96910/subtitle_backend/src/api/main.py", "pattern": "/^app = FastAPI($/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "cues", "path": "/home/kavia/workspace/code-generation/subtitle-repositioning-system-96900-96910/subtitle_backend/src/api/main.py", "pattern": "/^    cues: List[RepositionedCue] = Field(..., description=\"List of repositioned cues\")$/", "language": "Python", "typeref": "typename:List[RepositionedCue]", "kind": "variable", "scope": "RepositionResponse", "scopeKind": "class"}, {"_type": "tag", "name": "docs_usage", "path": "/home/kavia/workspace/code-generation/subtitle-repositioning-system-96900-96910/subtitle_backend/src/api/main.py", "pattern": "/^def docs_usage():$/", "language": "Python", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "end", "path": "/home/kavia/workspace/code-generation/subtitle-repositioning-system-96900-96910/subtitle_backend/src/api/main.py", "pattern": "/^    end: float = Field(..., description=\"Cue end time in seconds\")$/", "language": "Python", "typeref": "typename:float", "kind": "variable", "scope": "Cue", "scopeKind": "class"}, {"_type": "tag", "name": "flush", "path": "/home/kavia/workspace/code-generation/subtitle-repositioning-system-96900-96910/subtitle_backend/src/api/main.py", "pattern": "/^    def flush():$/", "file": true, "language": "Python", "kind": "function", "signature": "()", "scope": "_parse_srt_to_cues", "scopeKind": "function"}, {"_type": "tag", "name": "format", "path": "/home/kavia/workspace/code-generation/subtitle-repositioning-system-96900-96910/subtitle_backend/src/api/main.py", "pattern": "/^    format: str = Field(..., description=\"Subtitle output format (e.g., srt)\")$/", "language": "Python", "typeref": "typename:str", "kind": "variable", "scope": "RepositionResponse", "scopeKind": "class"}, {"_type": "tag", "name": "health_check", "path": "/home/kavia/workspace/code-generation/subtitle-repositioning-system-96900-96910/subtitle_backend/src/api/main.py", "pattern": "/^def health_check():$/", "language": "Python", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "note", "path": "/home/kavia/workspace/code-generation/subtitle-repositioning-system-96900-96910/subtitle_backend/src/api/main.py", "pattern": "/^    note: Optional[str] = Field(None, description=\"Additional info about the processing\")$/", "language": "Python", "typeref": "typename:Optional[str]", "kind": "variable", "scope": "RepositionResponse", "scopeKind": "class"}, {"_type": "tag", "name": "position", "path": "/home/kavia/workspace/code-generation/subtitle-repositioning-system-96900-96910/subtitle_backend/src/api/main.py", "pattern": "/^    position: str = Field(..., description=\"Suggested position, e.g., 'top' or 'bottom'\")$/", "language": "Python", "typeref": "typename:str", "kind": "variable", "scope": "RepositionedCue", "scopeKind": "class"}, {"_type": "tag", "name": "reposition_subtitles_download", "path": "/home/kavia/workspace/code-generation/subtitle-repositioning-system-96900-96910/subtitle_backend/src/api/main.py", "pattern": "/^async def reposition_subtitles_download($/", "language": "Python", "kind": "function", "signature": "( video: UploadFile = File(..., description=\"Video file\"), subtitles_file: UploadFile = File(..., description=\"SRT subtitle file\"), include_position_hint: bool = Form(True, description=\"If true, annotate text with '[pos: ...]'\"), )"}, {"_type": "tag", "name": "reposition_subtitles_json", "path": "/home/kavia/workspace/code-generation/subtitle-repositioning-system-96900-96910/subtitle_backend/src/api/main.py", "pattern": "/^async def reposition_subtitles_json($/", "language": "Python", "kind": "function", "signature": "( video: UploadFile = File(..., description=\"Video file\"), subtitles_file: UploadFile = File(..., description=\"SRT subtitle file\"), )"}, {"_type": "tag", "name": "start", "path": "/home/kavia/workspace/code-generation/subtitle-repositioning-system-96900-96910/subtitle_backend/src/api/main.py", "pattern": "/^    start: float = Field(..., description=\"Cue start time in seconds\")$/", "language": "Python", "typeref": "typename:float", "kind": "variable", "scope": "Cue", "scopeKind": "class"}, {"_type": "tag", "name": "text", "path": "/home/kavia/workspace/code-generation/subtitle-repositioning-system-96900-96910/subtitle_backend/src/api/main.py", "pattern": "/^    text: str = Field(..., description=\"Cue text content\")$/", "language": "Python", "typeref": "typename:str", "kind": "variable", "scope": "Cue", "scopeKind": "class"}], "hash": "2907b245624f446863402a1218571909", "format-version": 4, "code-base-name": "subtitle_backend", "filename": "subtitle_backend/src/api/main.py", "fields": [{"name": "app = FastAPI(", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "List[RepositionedCue] cues", "scope": "RepositionResponse", "scopeKind": "class", "description": "unavailable"}, {"name": "float end", "scope": "Cue", "scopeKind": "class", "description": "unavailable"}, {"name": "str format", "scope": "RepositionResponse", "scopeKind": "class", "description": "unavailable"}, {"name": "Optional[str] note", "scope": "RepositionResponse", "scopeKind": "class", "description": "unavailable"}, {"name": "str position", "scope": "RepositionedCue", "scopeKind": "class", "description": "unavailable"}, {"name": "float start", "scope": "Cue", "scopeKind": "class", "description": "unavailable"}, {"name": "str text", "scope": "Cue", "scopeKind": "class", "description": "unavailable"}]}